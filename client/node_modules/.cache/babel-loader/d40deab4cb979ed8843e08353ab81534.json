{"ast":null,"code":"var _jsxFileName = \"/Users/griffinbaker/Desktop/chat-application/client/src/components/chat-info-modal/chat-info-modal.components.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef, Fragment } from 'react';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport UserInfoModal from '../user-info-modal/user-info-modal.component';\nimport { ReactComponent as ChevronRight } from '../../assets/chevron-right.svg';\nimport { ReactComponent as EditPencil } from '../../assets/pencil.svg';\nimport AddUserDropdown from '../add-user-dropdown/add-user-dropdown.component';\nimport './chat-info-modal.styles.scss';\nimport Tooltip from '../tooltip/tooltip.component';\nimport { defaultToast, TOAST_TYPE, generateChatNameForSoloChats } from '../../utils/utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatInfoModal = _ref => {\n  _s();\n\n  let {\n    userFlag\n  } = _ref;\n  const {\n    currentUser\n  } = useAuthentication();\n  const {\n    activeChat,\n    setActiveChat,\n    chats,\n    setChats,\n    showModal,\n    closeModal,\n    fetchChats,\n    showAddUserInfoDropdown,\n    setShowAddUserInfoDropdown,\n    showActiveUserWithinChatInfo,\n    setShowActiveUserWithinChatInfo,\n    setActiveUserInfo\n  } = useChatView();\n  const [showChatEdit, setShowChatEdit] = useState(false);\n  const [newChatName, setNewChatName] = useState('');\n  const chatEditInputRef = useRef(null); // const [isLoading, setIsLoading] = useState(false);\n  // So yeah, cool, the chats will be updated whenever you create a new chat from the modal so can easily tell / check duplicate chats are being\n\n  useEffect(() => {\n    if (!chatEditInputRef.current) return;\n    chatEditInputRef.current.focus();\n  }, [showChatEdit]);\n  useEffect(() => {\n    if (!activeChat[0]) return;\n\n    if (!activeChat[0].isGroupChat) {\n      setNewChatName(generateChatNameForSoloChats(activeChat[0].users, currentUser));\n      return;\n    }\n\n    setNewChatName(activeChat[0].chatName);\n  }, [activeChat, showChatEdit, currentUser]);\n\n  const updateActiveUserChatInfo = e => {\n    const selectedUserId = e.target.closest('.group-chat-modal-user-info-container').getAttribute('name');\n    const selectedUser = activeChat[0].users.filter(user => user._id === selectedUserId);\n    setActiveUserInfo(selectedUser[0]);\n  };\n\n  const closeAddUserInfoAndStopPropagation = e => {\n    const addButtonPress = e.target.closest('.add-button-container');\n    e.stopPropagation();\n\n    if (!addButtonPress) {\n      setShowAddUserInfoDropdown(false);\n    }\n  };\n\n  const handleShowUserDropdown = () => setShowAddUserInfoDropdown(prevState => !prevState);\n\n  const handleLeaveChat = async e => {\n    try {\n      const response = await fetch('http://localhost:4000/api/chat/leaveChat', {\n        method: 'put',\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          chatId: activeChat[0]._id\n        })\n      });\n      const updatedChat = await response.json();\n      closeModal();\n      fetchChats();\n      defaultToast(TOAST_TYPE.success, 'You have left the chat');\n    } catch (error) {\n      defaultToast(TOAST_TYPE.failure, 'Error leaving chat');\n    }\n  };\n\n  const handleKeyChange = async e => {\n    if (e.code !== 'Enter') return;\n\n    if (newChatName === activeChat[0].chatName) {\n      setShowChatEdit(false);\n      return;\n    }\n\n    if (!newChatName) {\n      defaultToast(TOAST_TYPE.error, 'Chat name cannot be blank');\n      setNewChatName(activeChat[0].chatName);\n      setShowChatEdit(false);\n      return;\n    }\n\n    try {\n      const response = await fetch('http://localhost:4000/api/chat/renameChat', {\n        method: 'put',\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          chatId: activeChat[0]._id,\n          chatName: newChatName\n        })\n      });\n      const updatedChat = await response.json();\n      setActiveChat([updatedChat]);\n      setShowChatEdit(false);\n      fetchChats();\n    } catch (error) {\n      defaultToast(TOAST_TYPE.failure, 'Error re-naming chat');\n    }\n  };\n\n  const handleChatNameChange = e => {\n    setNewChatName(e.target.value);\n  };\n\n  const handleEditChatName = () => {\n    setShowChatEdit(prevState => !prevState);\n  }; // So what I am going to need to is to set the state of the input field to be equal to the current chat name so that when you switch the component on click the name is already filled\n  // This is sick you can also just store an object with the different users that you visited and each time you go back you go back to the prior user...apparently can also use a graph for this as well\n  // Check if it is a solo chat or a group chat, and then render a different modal accordingly\n  // Could have also made calsses that I would apply across the different modals, but at this point..\n  // If it is a group chat, then I want to show the entire chat, and then once you click on a user, I actually just want to switch to not show the group chat, but to show the actual user info-modal, hide the group chat, and include a back arrow\n  //Right now I am thinking that you render both, but you hid ohe programatically. I think I can do this, never done it before, but should not be too bad hopefuly. When you click on user profile or on one of the names in the chat, hide the chat info display and show the user info modal\n\n\n  return activeChat[0] && !userFlag ? /*#__PURE__*/_jsxDEV(\"div\", {\n    name: \"chat-info-modal\",\n    className: `chat-info-modal-container ${showModal ? 'active' : ''}`,\n    onClick: closeModal,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-info-modal-content\",\n      onClick: closeAddUserInfoAndStopPropagation,\n      style: showActiveUserWithinChatInfo ? {\n        visibility: 'hidden'\n      } : {\n        visibility: 'visible'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-chat-modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: chatEditInputRef,\n          className: \"group-chat-modal-header-chat-name\",\n          onKeyDown: handleKeyChange,\n          onChange: handleChatNameChange,\n          value: newChatName,\n          style: !showChatEdit ? {\n            display: 'none'\n          } : {\n            visibility: 'visible'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: !showChatEdit ? {\n            visibility: 'visible'\n          } : {\n            display: 'none'\n          },\n          children: activeChat[0].isGroupChat ? activeChat[0].chatName : newChatName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), activeChat[0].isGroupChat && /*#__PURE__*/_jsxDEV(Tooltip, {\n          content: \"Click to edit chat name\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit-pencil-container\",\n            onClick: handleEditChatName,\n            children: /*#__PURE__*/_jsxDEV(EditPencil, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: closeModal,\n          type: \"button\",\n          style: {\n            color: 'white',\n            marginLeft: 'auto'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"group-chat-modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group-chat-modal-chat-participants-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"group-chat-modal-member-header-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Members\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              content: \"Click to add user\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: handleShowUserDropdown,\n                className: \"add-button-container\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), showAddUserInfoDropdown && /*#__PURE__*/_jsxDEV(AddUserDropdown, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: updateActiveUserChatInfo,\n            className: \"group-chat-modal-member-container\",\n            children: activeChat[0].users.filter(user => user._id !== currentUser._id).map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n              name: user._id,\n              className: \"group-chat-modal-user-info-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"group-chat-modal-user-info-picture-container\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  height: \"100%\",\n                  src: user.picture,\n                  alt: \"user\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-name-user-userName-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"@\", user.userName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 21\n              }, this)]\n            }, user._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: handleLeaveChat,\n          className: \"chat-info-modal-button\",\n          children: activeChat[0].isGroupChat && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"leave-chat-button\",\n            type: \"submit\",\n            children: \"Leave Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserInfoModal, {\n      style: showActiveUserWithinChatInfo ? {\n        visibility: 'visible'\n      } : {\n        visibility: 'hidden'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(UserInfoModal, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChatInfoModal, \"3TnVzWnB2q17/7BSkD7+XVuCE7Q=\", false, function () {\n  return [useAuthentication, useChatView];\n});\n\n_c = ChatInfoModal;\nexport default ChatInfoModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatInfoModal\");","map":{"version":3,"names":["useEffect","useState","useRef","Fragment","useAuthentication","useChatView","UserInfoModal","ReactComponent","ChevronRight","EditPencil","AddUserDropdown","Tooltip","defaultToast","TOAST_TYPE","generateChatNameForSoloChats","ChatInfoModal","userFlag","currentUser","activeChat","setActiveChat","chats","setChats","showModal","closeModal","fetchChats","showAddUserInfoDropdown","setShowAddUserInfoDropdown","showActiveUserWithinChatInfo","setShowActiveUserWithinChatInfo","setActiveUserInfo","showChatEdit","setShowChatEdit","newChatName","setNewChatName","chatEditInputRef","current","focus","isGroupChat","users","chatName","updateActiveUserChatInfo","e","selectedUserId","target","closest","getAttribute","selectedUser","filter","user","_id","closeAddUserInfoAndStopPropagation","addButtonPress","stopPropagation","handleShowUserDropdown","prevState","handleLeaveChat","response","fetch","method","headers","Authorization","token","body","JSON","stringify","chatId","updatedChat","json","success","error","failure","handleKeyChange","code","handleChatNameChange","value","handleEditChatName","visibility","display","color","marginLeft","map","picture","name","userName"],"sources":["/Users/griffinbaker/Desktop/chat-application/client/src/components/chat-info-modal/chat-info-modal.components.jsx"],"sourcesContent":["import { useEffect, useState, useRef, Fragment } from 'react';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport UserInfoModal from '../user-info-modal/user-info-modal.component';\nimport { ReactComponent as ChevronRight } from '../../assets/chevron-right.svg';\nimport { ReactComponent as EditPencil } from '../../assets/pencil.svg';\nimport AddUserDropdown from '../add-user-dropdown/add-user-dropdown.component';\nimport './chat-info-modal.styles.scss';\nimport Tooltip from '../tooltip/tooltip.component';\nimport {\n  defaultToast,\n  TOAST_TYPE,\n  generateChatNameForSoloChats,\n} from '../../utils/utils';\n\nconst ChatInfoModal = ({ userFlag }) => {\n  const { currentUser } = useAuthentication();\n  const {\n    activeChat,\n    setActiveChat,\n    chats,\n    setChats,\n    showModal,\n    closeModal,\n    fetchChats,\n    showAddUserInfoDropdown,\n    setShowAddUserInfoDropdown,\n    showActiveUserWithinChatInfo,\n    setShowActiveUserWithinChatInfo,\n    setActiveUserInfo,\n  } = useChatView();\n\n  const [showChatEdit, setShowChatEdit] = useState(false);\n  const [newChatName, setNewChatName] = useState('');\n  const chatEditInputRef = useRef(null);\n  // const [isLoading, setIsLoading] = useState(false);\n\n  // So yeah, cool, the chats will be updated whenever you create a new chat from the modal so can easily tell / check duplicate chats are being\n\n  useEffect(() => {\n    if (!chatEditInputRef.current) return;\n    chatEditInputRef.current.focus();\n  }, [showChatEdit]);\n\n  useEffect(() => {\n    if (!activeChat[0]) return;\n    if (!activeChat[0].isGroupChat) {\n      setNewChatName(\n        generateChatNameForSoloChats(activeChat[0].users, currentUser)\n      );\n      return;\n    }\n    setNewChatName(activeChat[0].chatName);\n  }, [activeChat, showChatEdit, currentUser]);\n\n  const updateActiveUserChatInfo = e => {\n    const selectedUserId = e.target\n      .closest('.group-chat-modal-user-info-container')\n      .getAttribute('name');\n\n    const selectedUser = activeChat[0].users.filter(\n      user => user._id === selectedUserId\n    );\n\n    setActiveUserInfo(selectedUser[0]);\n  };\n\n  const closeAddUserInfoAndStopPropagation = e => {\n    const addButtonPress = e.target.closest('.add-button-container');\n    e.stopPropagation();\n\n    if (!addButtonPress) {\n      setShowAddUserInfoDropdown(false);\n    }\n  };\n\n  const handleShowUserDropdown = () =>\n    setShowAddUserInfoDropdown(prevState => !prevState);\n\n  const handleLeaveChat = async e => {\n    try {\n      const response = await fetch('http://localhost:4000/api/chat/leaveChat', {\n        method: 'put',\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          chatId: activeChat[0]._id,\n        }),\n      });\n\n      const updatedChat = await response.json();\n      closeModal();\n      fetchChats();\n      defaultToast(TOAST_TYPE.success, 'You have left the chat');\n    } catch (error) {\n      defaultToast(TOAST_TYPE.failure, 'Error leaving chat');\n    }\n  };\n\n  const handleKeyChange = async e => {\n    if (e.code !== 'Enter') return;\n    if (newChatName === activeChat[0].chatName) {\n      setShowChatEdit(false);\n      return;\n    }\n    if (!newChatName) {\n      defaultToast(TOAST_TYPE.error, 'Chat name cannot be blank');\n      setNewChatName(activeChat[0].chatName);\n      setShowChatEdit(false);\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        'http://localhost:4000/api/chat/renameChat',\n        {\n          method: 'put',\n          headers: {\n            Authorization: `Bearer ${currentUser.token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            chatId: activeChat[0]._id,\n            chatName: newChatName,\n          }),\n        }\n      );\n\n      const updatedChat = await response.json();\n      setActiveChat([updatedChat]);\n      setShowChatEdit(false);\n      fetchChats();\n    } catch (error) {\n      defaultToast(TOAST_TYPE.failure, 'Error re-naming chat');\n    }\n  };\n\n  const handleChatNameChange = e => {\n    setNewChatName(e.target.value);\n  };\n\n  const handleEditChatName = () => {\n    setShowChatEdit(prevState => !prevState);\n  };\n  // So what I am going to need to is to set the state of the input field to be equal to the current chat name so that when you switch the component on click the name is already filled\n\n  // This is sick you can also just store an object with the different users that you visited and each time you go back you go back to the prior user...apparently can also use a graph for this as well\n\n  // Check if it is a solo chat or a group chat, and then render a different modal accordingly\n\n  // Could have also made calsses that I would apply across the different modals, but at this point..\n\n  // If it is a group chat, then I want to show the entire chat, and then once you click on a user, I actually just want to switch to not show the group chat, but to show the actual user info-modal, hide the group chat, and include a back arrow\n\n  //Right now I am thinking that you render both, but you hid ohe programatically. I think I can do this, never done it before, but should not be too bad hopefuly. When you click on user profile or on one of the names in the chat, hide the chat info display and show the user info modal\n\n  return activeChat[0] && !userFlag ? (\n    <div\n      name=\"chat-info-modal\"\n      className={`chat-info-modal-container ${showModal ? 'active' : ''}`}\n      onClick={closeModal}\n    >\n      <div\n        className=\"chat-info-modal-content\"\n        onClick={closeAddUserInfoAndStopPropagation}\n        style={\n          showActiveUserWithinChatInfo\n            ? { visibility: 'hidden' }\n            : { visibility: 'visible' }\n        }\n      >\n        <div className=\"group-chat-modal-header\">\n          <input\n            ref={chatEditInputRef}\n            className=\"group-chat-modal-header-chat-name\"\n            onKeyDown={handleKeyChange}\n            onChange={handleChatNameChange}\n            value={newChatName}\n            style={\n              !showChatEdit ? { display: 'none' } : { visibility: 'visible' }\n            }\n          />\n          <p\n            style={\n              !showChatEdit ? { visibility: 'visible' } : { display: 'none' }\n            }\n          >\n            {activeChat[0].isGroupChat ? activeChat[0].chatName : newChatName}\n          </p>\n          {activeChat[0].isGroupChat && (\n            <Tooltip content=\"Click to edit chat name\">\n              <div\n                className=\"edit-pencil-container\"\n                onClick={handleEditChatName}\n              >\n                {/* Add a check for whether it is a group chat or not */}\n                <EditPencil />\n              </div>\n            </Tooltip>\n          )}\n          <button\n            onClick={closeModal}\n            type=\"button\"\n            style={{ color: 'white', marginLeft: 'auto' }}\n          >\n            &#x2715;\n          </button>\n        </div>\n        <div className=\"group-chat-modal-body\">\n          <div className=\"group-chat-modal-chat-participants-container\">\n            <div className=\"group-chat-modal-member-header-container\">\n              <p>Members</p>\n              <Tooltip content=\"Click to add user\">\n                <div\n                  onClick={handleShowUserDropdown}\n                  className=\"add-button-container\"\n                >\n                  <span>+</span>\n                </div>\n              </Tooltip>\n              {showAddUserInfoDropdown && <AddUserDropdown />}\n            </div>\n            <div\n              onClick={updateActiveUserChatInfo}\n              className=\"group-chat-modal-member-container\"\n            >\n              {activeChat[0].users\n                .filter(user => user._id !== currentUser._id)\n                .map(user => (\n                  <div\n                    key={user._id}\n                    name={user._id}\n                    className=\"group-chat-modal-user-info-container\"\n                  >\n                    <div className=\"group-chat-modal-user-info-picture-container\">\n                      <img height=\"100%\" src={user.picture} alt=\"user\" />\n                    </div>\n                    <div className=\"user-name-user-userName-container\">\n                      <p>{user.name}</p>\n                      <p>@{user.userName}</p>\n                    </div>\n                    {/* <div className=\"chevron-container\">\n                      <ChevronRight />\n                    </div> */}\n                  </div>\n                ))}\n            </div>\n          </div>\n          <div onClick={handleLeaveChat} className=\"chat-info-modal-button\">\n            {activeChat[0].isGroupChat && (\n              <button className=\"leave-chat-button\" type=\"submit\">\n                Leave Chat\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n      <UserInfoModal\n        style={\n          showActiveUserWithinChatInfo\n            ? { visibility: 'visible' }\n            : { visibility: 'hidden' }\n        }\n      />\n    </div>\n  ) : (\n    <UserInfoModal />\n  );\n};\nexport default ChatInfoModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
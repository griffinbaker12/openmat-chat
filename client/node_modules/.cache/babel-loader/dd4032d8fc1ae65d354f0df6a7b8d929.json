{"ast":null,"code":"var _jsxFileName = \"/Users/griffinbaker/Desktop/chat-application/client/src/components/user-info-modal/user-info-modal.component.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport Tooltip from '../tooltip/tooltip.component';\nimport UserInfoDropdown from '../user-info-dropdown/user-info-dropdown.component';\nimport { getMutualFriends } from '../../utils/utils';\nimport './user-info-modal.styles.scss'; // This could easily be made more generalizable by saying activeUser and then whatever user you click on will have the same profile\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserInfoModal = () => {\n  _s();\n\n  const {\n    activeUserInfo,\n    showModal,\n    closeModal,\n    isActiveUserCurrentUser,\n    setShowActiveUserWithinChatInfo,\n    showActiveUserWithinChatInfo\n  } = useChatView();\n  const {\n    currentUser\n  } = useAuthentication();\n  const [showDropdown, setShowDropdown] = useState(false); // When you look at their profile, you should be able to chat them, remove or add them as a friend, see their friends...TOMORROW!\n  // Could be cool to be able to click either the chats or friends and then re-direct the user to the left hand side to either their chats or their friends. Also, if the active current user IS NOT the current user, then we need to show a back arrow to go back to the active chat\n\n  const goBackToChatInfo = () => setShowActiveUserWithinChatInfo(false);\n\n  const handleChatCreation = async e => {\n    e.stopPropagation();\n    const soloChats = chats.filter(chat => !chat.isGroupChat);\n    const existingChat = soloChats.find(chat => chat.users.some(user => user._id === activeUserInfo._id));\n\n    if (existingChat) {\n      closeModal();\n      closeDropdown();\n      setActiveChat([existingChat]);\n      return;\n    } else {\n      const otherParticipantId = [activeUserInfo._id];\n      const payload = {\n        chatName: null,\n        users: otherParticipantId\n      };\n\n      try {\n        const response = await fetch(`http://localhost:4000/api/chat/createChat`, {\n          method: 'post',\n          headers: {\n            Authorization: `Bearer ${currentUser.token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        const newChat = await response.json();\n        setChats(prevState => [newChat, ...prevState]);\n        closeModal();\n        closeDropdown();\n        defaultToast(TOAST_TYPE.success, 'Chat creation successful');\n      } catch (e) {\n        defaultToast(TOAST_TYPE.failure, 'Error creating chat');\n      }\n    }\n  };\n\n  const handleDropdown = () => {\n    setShowDropdown(prevState => !prevState);\n  };\n\n  const handleModalClick = e => {\n    e.stopPropagation();\n\n    if (showDropdown) {\n      setShowDropdown(false);\n      return;\n    }\n\n    closeModal();\n  };\n\n  const closeDropdown = () => setShowDropdown(false);\n\n  const closeUserInfoDropdownAndStopPropagation = e => {\n    const ellipsisPress = e.target.closest('.user-info-modal-back-ellipsis');\n    e.stopPropagation();\n\n    if (!ellipsisPress) {\n      setShowDropdown(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', closeUserInfoDropdownAndStopPropagation);\n    return () => document.removeEventListener('click', closeUserInfoDropdownAndStopPropagation);\n  });\n  return activeUserInfo && showActiveUserWithinChatInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `user-info-modal-container ${showModal ? 'active' : ''}`,\n    onClick: handleModalClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-info-modal-content\",\n      onClick: closeUserInfoDropdownAndStopPropagation,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: isActiveUserCurrentUser ? {\n          visibility: 'visible',\n          marginBottom: '4px'\n        } : {\n          display: 'none'\n        },\n        className: \"user-info-modal-button-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: closeModal,\n          type: \"button\",\n          style: {\n            color: 'white'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info-modal-user-detail-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info-modal-user-detail-header-with-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: goBackToChatInfo,\n            className: \"user-info-modal-back-arrow\",\n            style: isActiveUserCurrentUser ? {\n              visibility: 'hidden'\n            } : {\n              fontSize: '24px'\n            },\n            children: \"\\u2190\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"user-info-modal-name\",\n            children: activeUserInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info-modal-username-email\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"@\", activeUserInfo.userName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info-modal-picture-container\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            height: \"100%\",\n            src: activeUserInfo.picture,\n            alt: \"profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleChatCreation,\n        className: \"user-info-button\",\n        children: \"Send Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 7\n  }, this);\n};\n\n_s(UserInfoModal, \"lam3ZgB0T+1Ram6NJBS+XUV/9w8=\", false, function () {\n  return [useChatView, useAuthentication];\n});\n\n_c = UserInfoModal;\nexport default UserInfoModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserInfoModal\");","map":{"version":3,"names":["useEffect","useState","useAuthentication","useChatView","Tooltip","UserInfoDropdown","getMutualFriends","UserInfoModal","activeUserInfo","showModal","closeModal","isActiveUserCurrentUser","setShowActiveUserWithinChatInfo","showActiveUserWithinChatInfo","currentUser","showDropdown","setShowDropdown","goBackToChatInfo","handleChatCreation","e","stopPropagation","soloChats","chats","filter","chat","isGroupChat","existingChat","find","users","some","user","_id","closeDropdown","setActiveChat","otherParticipantId","payload","chatName","response","fetch","method","headers","Authorization","token","body","JSON","stringify","newChat","json","setChats","prevState","defaultToast","TOAST_TYPE","success","failure","handleDropdown","handleModalClick","closeUserInfoDropdownAndStopPropagation","ellipsisPress","target","closest","document","addEventListener","removeEventListener","visibility","marginBottom","display","color","fontSize","name","userName","picture"],"sources":["/Users/griffinbaker/Desktop/chat-application/client/src/components/user-info-modal/user-info-modal.component.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport Tooltip from '../tooltip/tooltip.component';\nimport UserInfoDropdown from '../user-info-dropdown/user-info-dropdown.component';\nimport { getMutualFriends } from '../../utils/utils';\nimport './user-info-modal.styles.scss';\n\n// This could easily be made more generalizable by saying activeUser and then whatever user you click on will have the same profile\n\nconst UserInfoModal = () => {\n  const {\n    activeUserInfo,\n    showModal,\n    closeModal,\n    isActiveUserCurrentUser,\n    setShowActiveUserWithinChatInfo,\n    showActiveUserWithinChatInfo,\n  } = useChatView();\n\n  const { currentUser } = useAuthentication();\n\n  const [showDropdown, setShowDropdown] = useState(false);\n\n  // When you look at their profile, you should be able to chat them, remove or add them as a friend, see their friends...TOMORROW!\n\n  // Could be cool to be able to click either the chats or friends and then re-direct the user to the left hand side to either their chats or their friends. Also, if the active current user IS NOT the current user, then we need to show a back arrow to go back to the active chat\n\n  const goBackToChatInfo = () => setShowActiveUserWithinChatInfo(false);\n\n  const handleChatCreation = async e => {\n    e.stopPropagation();\n\n    const soloChats = chats.filter(chat => !chat.isGroupChat);\n\n    const existingChat = soloChats.find(chat =>\n      chat.users.some(user => user._id === activeUserInfo._id)\n    );\n\n    if (existingChat) {\n      closeModal();\n      closeDropdown();\n      setActiveChat([existingChat]);\n      return;\n    } else {\n      const otherParticipantId = [activeUserInfo._id];\n      const payload = {\n        chatName: null,\n        users: otherParticipantId,\n      };\n\n      try {\n        const response = await fetch(\n          `http://localhost:4000/api/chat/createChat`,\n          {\n            method: 'post',\n            headers: {\n              Authorization: `Bearer ${currentUser.token}`,\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(payload),\n          }\n        );\n        const newChat = await response.json();\n        setChats(prevState => [newChat, ...prevState]);\n        closeModal();\n        closeDropdown();\n        defaultToast(TOAST_TYPE.success, 'Chat creation successful');\n      } catch (e) {\n        defaultToast(TOAST_TYPE.failure, 'Error creating chat');\n      }\n    }\n  };\n\n  const handleDropdown = () => {\n    setShowDropdown(prevState => !prevState);\n  };\n\n  const handleModalClick = e => {\n    e.stopPropagation();\n    if (showDropdown) {\n      setShowDropdown(false);\n      return;\n    }\n    closeModal();\n  };\n\n  const closeDropdown = () => setShowDropdown(false);\n\n  const closeUserInfoDropdownAndStopPropagation = e => {\n    const ellipsisPress = e.target.closest('.user-info-modal-back-ellipsis');\n    e.stopPropagation();\n\n    if (!ellipsisPress) {\n      setShowDropdown(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', closeUserInfoDropdownAndStopPropagation);\n    return () =>\n      document.removeEventListener(\n        'click',\n        closeUserInfoDropdownAndStopPropagation\n      );\n  });\n\n  return (\n    activeUserInfo &&\n    showActiveUserWithinChatInfo && (\n      <div\n        className={`user-info-modal-container ${showModal ? 'active' : ''}`}\n        onClick={handleModalClick}\n      >\n        <div\n          className=\"user-info-modal-content\"\n          onClick={closeUserInfoDropdownAndStopPropagation}\n        >\n          <div\n            style={\n              isActiveUserCurrentUser\n                ? { visibility: 'visible', marginBottom: '4px' }\n                : { display: 'none' }\n            }\n            className=\"user-info-modal-button-container\"\n          >\n            <button\n              onClick={closeModal}\n              type=\"button\"\n              style={{ color: 'white' }}\n            >\n              &#x2715;\n            </button>\n          </div>\n          <div className=\"user-info-modal-user-detail-container\">\n            <div className=\"user-info-modal-user-detail-header-with-buttons\">\n              <div\n                onClick={goBackToChatInfo}\n                className=\"user-info-modal-back-arrow\"\n                style={\n                  isActiveUserCurrentUser\n                    ? { visibility: 'hidden' }\n                    : {\n                        fontSize: '24px',\n                      }\n                }\n              >\n                &#8592;\n              </div>\n              <p className=\"user-info-modal-name\">{activeUserInfo.name}</p>\n              {/* <div\n                onClick={handleDropdown}\n                className=\"user-info-modal-back-ellipsis\"\n                style={\n                  isActiveUserCurrentUser\n                    ? { visibility: 'hidden' }\n                    : {\n                        visibility: 'visible',\n                        paddingRight: '4px',\n                        paddingLeft: '12px',\n                        marginTop: '4px',\n                        fontWeight: 'bold',\n                      }\n                }\n              >\n                &#8942;\n              </div>\n              {showDropdown && (\n                <UserInfoDropdown closeDropdown={closeDropdown} />\n              )} */}\n            </div>\n            <div className=\"user-info-modal-username-email\">\n              <p>@{activeUserInfo.userName}</p>\n            </div>\n            <div className=\"user-info-modal-picture-container\">\n              <img height=\"100%\" src={activeUserInfo.picture} alt=\"profile\" />\n            </div>\n\n            {/* <div className=\"user-info-modal-additional-user-info-container\"> */}\n            {/* If the user is not the current user, then calculate the number of mutual friends and mutual conversations\n            <p>{`${getMutualFriends(\n                activeUserInfo.friends,\n                currentUser.friends\n              )} ${isActiveUserCurrentUser ? '' : 'Mutual'} Friends`}</p> */}\n            {/* Insert a little chevron to see a dropdown of all of their friends, remove them as a friend in red, can make this more generalizable just as any user profie that you click on with the if friend then delete or add friend */}\n            {/* Could do the same but with conversations, mutual servers / convos. And then when you are looking at this from the perspective of the current user, it would lead you to the left side, either the conversations, or to your frineds, not even sure if that is necessary tbh */}\n          </div>\n          <button onClick={handleChatCreation} className=\"user-info-button\">\n            Send Message\n          </button>\n        </div>\n\n        {/* </div> */}\n      </div>\n    )\n  );\n};\n\nexport default UserInfoModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/griffinbaker/Desktop/chat-application/client/src/components/new-conversation-modal/new-conversation-modal.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment } from 'react';\nimport { useRef, useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport ChatParticipant from '../chat-participant/chat-participant.component';\nimport SearchResult from '../search-result/search-result-component';\nimport { toast } from 'react-toastify';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport './new-conversation-modal.styles.scss';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { defaultToast, TOAST_TYPE } from '../../utils/utils'; // There seems to also totally be room to just have one modal component, and also a genreal button component as well, but for the modal, essentially I can just pass in the name of the modal itself, and then the body of the modal. The 'children' can just be the unique part of the actual form for these components that gets inserted into the overall block of the component\n// Will also need to add something where I can check if the user exists and as the person types have a little dropdown that can fill in suggestions? May not be necessary, but I know that discord does that and you can always @someone in that way, would be a nice feature to try and implement\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewConversationModal = () => {\n  _s();\n\n  const {\n    closeModal,\n    chats,\n    setChats\n  } = useChatView();\n  const {\n    currentUser\n  } = useAuthentication();\n  const [chatParticipants, setChatParticipants] = useState([]);\n  const [formInput, setFormInput] = useState({\n    chatName: '',\n    name: ''\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchResults, setSearchResults] = useState([]);\n  const nodeRef = useRef(null);\n  console.log(nodeRef); // So keep track of all the participants here, will need to search as well, then when we make the chat we send this to the api and push this into the current chat state of our application, also need to check to see if a chat with these users has already been made...\n  // This is fine for now, I guess at some point I need to make it clear whether or not you can submit this when you hit enter, or whether hitting enter adds people to the chat if there are none, but then it probably should stary like that as well even afterwards so may make the other button a button type as well\n\n  const resetForm = () => {\n    closeModal();\n    setChatParticipants([]);\n    setSearchResults([]);\n    setFormInput({\n      chatName: '',\n      name: ''\n    });\n  };\n\n  const handleChatCreation = async e => {\n    e.preventDefault(); // May want some sort of notification just letting them know that they need to enter something into the chat name field\n\n    if (chatParticipants.length === 0) {\n      toast.error('Please add users to chat', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark'\n      });\n      return;\n    }\n\n    if (!formInput.chatName && chatParticipants.length !== 1) {\n      toast.error('Please add name for group chat', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark'\n      });\n      return;\n    } // console.log(chats, 'chats');\n    // I need to get the ids out of everyone in the current chat\n\n\n    const mappedChatWithNames = chats.map(chat => chat.users.map(_ref => {\n      let {\n        userName\n      } = _ref;\n      return userName;\n    }).sort()); // console.log(mappedChatWithNames, 'sorted uns');\n\n    const sortedChatParticipants = [currentUser, ...chatParticipants].map(user => user.userName).sort();\n    const exists = mappedChatWithNames.some(chat => {\n      if (chat.length !== sortedChatParticipants.length) return false;\n      return chat.every((user, i) => user === sortedChatParticipants[i]);\n    });\n\n    if (exists) {\n      toast.error('Chat between these users already exists', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark'\n      });\n      return;\n    }\n\n    const chatName = chatParticipants.length === 1 ? 'null' : formInput.chatName;\n    const chatParticipantIds = chatParticipants.map(_ref2 => {\n      let {\n        _id\n      } = _ref2;\n      return _id;\n    });\n    const payload = {\n      chatName: chatName,\n      users: chatParticipantIds\n    };\n\n    try {\n      const response = await fetch(`http://localhost:4000/api/chat/createChat`, {\n        method: 'post',\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const newChat = await response.json();\n      setChats(prevState => [newChat, ...prevState]);\n      resetForm();\n      toast.success('Chat creation successful', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark'\n      });\n    } catch (e) {\n      toast.error('Error creating chat, please try again', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark'\n      });\n    } // createConversation(chatParticipants);\n    // closeModal();\n    // setFormInput({ chatName: '', name: '' });\n    // setChatParticipants([]);\n\n  };\n\n  const handleChange = async e => {\n    const field = e.target.getAttribute('name');\n    const query = e.target.value;\n    setFormInput(prevState => ({ ...prevState,\n      [field]: query\n    })); // If we are typing into the name field, then we want to make a fetch reqeust with the current value of the input\n\n    if (field !== 'name') return;\n\n    if (!query) {\n      setSearchResults([]);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      const response = await fetch(`http://localhost:4000/api/user?search=${query}`, {\n        method: 'get',\n        headers: {\n          Authorization: `Bearer ${currentUser.token}`\n        }\n      });\n      const {\n        users\n      } = await response.json();\n      const filteredUsers = users.filter(user => !chatParticipants.some(participant => user._id !== participant._id));\n      setIsLoading(false);\n      setSearchResults(filteredUsers);\n    } catch (e) {\n      console.log('some error with search results');\n    }\n  };\n\n  const handleAddUser = e => {\n    const closestContainer = e.target.closest('.search-result-container');\n    const selectedId = closestContainer.getAttribute('name');\n    const alreadyExists = chatParticipants.some(participant => participant._id === selectedId);\n\n    if (alreadyExists) {\n      // Just as a general point, it would be a better idea not to even show them in the results, why would you allow the user to do something they aren't allowed to like that? Did you already do this on the add to chat\n      defaultToast(TOAST_TYPE.failure, 'Cannot add duplicate user');\n      return;\n    }\n\n    const selectedUser = searchResults.find(result => (result === null || result === void 0 ? void 0 : result._id) === selectedId);\n    const filteredUsers = searchResults.filter(result => selectedUser._id !== result._id);\n    console.log(filteredUsers);\n    setChatParticipants(prevState => [...prevState, selectedUser]); // setSearchResults(filteredUsers);\n    // setSearchResults(prevState => {\n    //   // I want to go through the prior state, and then add maybe some animation that pops up when you show the users, or maybe a removed animcation so that once that user is removed, maybe we could do some cool animation, honeslty could do it on click, and then here you just set the result so that they are actually gone, but maybe you don't even need it at all. Maybe just could add a class to the element that was clicked to removed it with an animation.\n    // });\n  };\n\n  const handleRemoveUser = e => {\n    const selectedId = e.target.getAttribute('name');\n    const newParticipants = chatParticipants.filter(participant => participant._id !== selectedId);\n    setChatParticipants(newParticipants);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-conversation-modal-body\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleChatCreation,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        style: chatParticipants.length <= 1 ? {\n          display: 'none'\n        } : {},\n        children: \"Chat Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Enter chat name...\",\n        onChange: handleChange,\n        type: \"text\",\n        name: \"chatName\",\n        value: formInput.chatName,\n        style: chatParticipants.length <= 1 ? {\n          display: 'none'\n        } : {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Search users...\",\n        onChange: handleChange,\n        type: \"text\",\n        name: \"name\",\n        value: formInput.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), chatParticipants.length === 0 ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"new-conversation-modal-chat-participant-container\",\n        children: chatParticipants.map((chatParticipant, i) => /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(ChatParticipant, {\n            chatParticipant: chatParticipant,\n            handleRemoveUser: handleRemoveUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n        in: searchResults.length > 0,\n        classNames: \"test-container\",\n        unmountOnExit: true,\n        mountOnEnter: true,\n        timeout: 300,\n        children: /*#__PURE__*/_jsxDEV(Fragment, {\n          nodeRef: nodeRef,\n          children: searchResults.length === 0 ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"new-conversation-modal-chat-search-result-container\",\n            children: searchResults.map((searchResult, i) => /*#__PURE__*/_jsxDEV(Fragment, {\n              children: /*#__PURE__*/_jsxDEV(SearchResult, {\n                chatParticipants: chatParticipants,\n                handleAddUser: handleAddUser,\n                searchResult: searchResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"new-conversation-modal-buttons\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: `${searchResults.length === 0 ? 'button-no-search-results' : ''}`,\n          children: \"Create Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewConversationModal, \"f4uxJpugrbT6Gg0NuEwDeeQEVCk=\", false, function () {\n  return [useChatView, useAuthentication];\n});\n\n_c = NewConversationModal;\nexport default NewConversationModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewConversationModal\");","map":{"version":3,"names":["React","Fragment","useRef","useState","CSSTransition","ChatParticipant","SearchResult","toast","useChatView","useAuthentication","defaultToast","TOAST_TYPE","NewConversationModal","closeModal","chats","setChats","currentUser","chatParticipants","setChatParticipants","formInput","setFormInput","chatName","name","isLoading","setIsLoading","searchResults","setSearchResults","nodeRef","console","log","resetForm","handleChatCreation","e","preventDefault","length","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","mappedChatWithNames","map","chat","users","userName","sort","sortedChatParticipants","user","exists","some","every","i","chatParticipantIds","_id","payload","response","fetch","method","headers","Authorization","token","body","JSON","stringify","newChat","json","prevState","success","handleChange","field","target","getAttribute","query","value","filteredUsers","filter","participant","handleAddUser","closestContainer","closest","selectedId","alreadyExists","failure","selectedUser","find","result","handleRemoveUser","newParticipants","display","chatParticipant","searchResult"],"sources":["/Users/griffinbaker/Desktop/chat-application/client/src/components/new-conversation-modal/new-conversation-modal.component.jsx"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { useRef, useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport ChatParticipant from '../chat-participant/chat-participant.component';\nimport SearchResult from '../search-result/search-result-component';\nimport { toast } from 'react-toastify';\nimport { useChatView } from '../../contexts/chat-view-context';\nimport './new-conversation-modal.styles.scss';\nimport { useAuthentication } from '../../contexts/authentication-context';\nimport { defaultToast, TOAST_TYPE } from '../../utils/utils';\n\n// There seems to also totally be room to just have one modal component, and also a genreal button component as well, but for the modal, essentially I can just pass in the name of the modal itself, and then the body of the modal. The 'children' can just be the unique part of the actual form for these components that gets inserted into the overall block of the component\n\n// Will also need to add something where I can check if the user exists and as the person types have a little dropdown that can fill in suggestions? May not be necessary, but I know that discord does that and you can always @someone in that way, would be a nice feature to try and implement\n\nconst NewConversationModal = () => {\n  const { closeModal, chats, setChats } = useChatView();\n  const { currentUser } = useAuthentication();\n\n  const [chatParticipants, setChatParticipants] = useState([]);\n  const [formInput, setFormInput] = useState({ chatName: '', name: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchResults, setSearchResults] = useState([]);\n  const nodeRef = useRef(null);\n\n  console.log(nodeRef);\n\n  // So keep track of all the participants here, will need to search as well, then when we make the chat we send this to the api and push this into the current chat state of our application, also need to check to see if a chat with these users has already been made...\n\n  // This is fine for now, I guess at some point I need to make it clear whether or not you can submit this when you hit enter, or whether hitting enter adds people to the chat if there are none, but then it probably should stary like that as well even afterwards so may make the other button a button type as well\n\n  const resetForm = () => {\n    closeModal();\n    setChatParticipants([]);\n    setSearchResults([]);\n    setFormInput({ chatName: '', name: '' });\n  };\n\n  const handleChatCreation = async e => {\n    e.preventDefault();\n\n    // May want some sort of notification just letting them know that they need to enter something into the chat name field\n\n    if (chatParticipants.length === 0) {\n      toast.error('Please add users to chat', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark',\n      });\n      return;\n    }\n\n    if (!formInput.chatName && chatParticipants.length !== 1) {\n      toast.error('Please add name for group chat', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark',\n      });\n      return;\n    }\n\n    // console.log(chats, 'chats');\n\n    // I need to get the ids out of everyone in the current chat\n    const mappedChatWithNames = chats.map(chat =>\n      chat.users.map(({ userName }) => userName).sort()\n    );\n    // console.log(mappedChatWithNames, 'sorted uns');\n\n    const sortedChatParticipants = [currentUser, ...chatParticipants]\n      .map(user => user.userName)\n      .sort();\n\n    const exists = mappedChatWithNames.some(chat => {\n      if (chat.length !== sortedChatParticipants.length) return false;\n      return chat.every((user, i) => user === sortedChatParticipants[i]);\n    });\n\n    if (exists) {\n      toast.error('Chat between these users already exists', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark',\n      });\n      return;\n    }\n\n    const chatName =\n      chatParticipants.length === 1 ? 'null' : formInput.chatName;\n\n    const chatParticipantIds = chatParticipants.map(({ _id }) => _id);\n    const payload = {\n      chatName: chatName,\n      users: chatParticipantIds,\n    };\n\n    try {\n      const response = await fetch(\n        `http://localhost:4000/api/chat/createChat`,\n        {\n          method: 'post',\n          headers: {\n            Authorization: `Bearer ${currentUser.token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload),\n        }\n      );\n      const newChat = await response.json();\n      setChats(prevState => [newChat, ...prevState]);\n      resetForm();\n      toast.success('Chat creation successful', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark',\n      });\n    } catch (e) {\n      toast.error('Error creating chat, please try again', {\n        position: 'bottom-center',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: 'dark',\n      });\n    }\n    // createConversation(chatParticipants);\n    // closeModal();\n    // setFormInput({ chatName: '', name: '' });\n    // setChatParticipants([]);\n  };\n\n  const handleChange = async e => {\n    const field = e.target.getAttribute('name');\n    const query = e.target.value;\n    setFormInput(prevState => ({ ...prevState, [field]: query }));\n\n    // If we are typing into the name field, then we want to make a fetch reqeust with the current value of the input\n    if (field !== 'name') return;\n\n    if (!query) {\n      setSearchResults([]);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      const response = await fetch(\n        `http://localhost:4000/api/user?search=${query}`,\n        {\n          method: 'get',\n          headers: { Authorization: `Bearer ${currentUser.token}` },\n        }\n      );\n      const { users } = await response.json();\n\n      const filteredUsers = users.filter(\n        user =>\n          !chatParticipants.some(participant => user._id !== participant._id)\n      );\n      setIsLoading(false);\n      setSearchResults(filteredUsers);\n    } catch (e) {\n      console.log('some error with search results');\n    }\n  };\n\n  const handleAddUser = e => {\n    const closestContainer = e.target.closest('.search-result-container');\n    const selectedId = closestContainer.getAttribute('name');\n    const alreadyExists = chatParticipants.some(\n      participant => participant._id === selectedId\n    );\n\n    if (alreadyExists) {\n      // Just as a general point, it would be a better idea not to even show them in the results, why would you allow the user to do something they aren't allowed to like that? Did you already do this on the add to chat\n      defaultToast(TOAST_TYPE.failure, 'Cannot add duplicate user');\n      return;\n    }\n\n    const selectedUser = searchResults.find(\n      result => result?._id === selectedId\n    );\n\n    const filteredUsers = searchResults.filter(\n      result => selectedUser._id !== result._id\n    );\n\n    console.log(filteredUsers);\n\n    setChatParticipants(prevState => [...prevState, selectedUser]);\n    // setSearchResults(filteredUsers);\n    // setSearchResults(prevState => {\n    //   // I want to go through the prior state, and then add maybe some animation that pops up when you show the users, or maybe a removed animcation so that once that user is removed, maybe we could do some cool animation, honeslty could do it on click, and then here you just set the result so that they are actually gone, but maybe you don't even need it at all. Maybe just could add a class to the element that was clicked to removed it with an animation.\n    // });\n  };\n\n  const handleRemoveUser = e => {\n    const selectedId = e.target.getAttribute('name');\n    const newParticipants = chatParticipants.filter(\n      participant => participant._id !== selectedId\n    );\n    setChatParticipants(newParticipants);\n  };\n\n  return (\n    <div className=\"new-conversation-modal-body\">\n      <form onSubmit={handleChatCreation}>\n        <label style={chatParticipants.length <= 1 ? { display: 'none' } : {}}>\n          Chat Name\n        </label>\n        <input\n          placeholder=\"Enter chat name...\"\n          onChange={handleChange}\n          type=\"text\"\n          name=\"chatName\"\n          value={formInput.chatName}\n          style={chatParticipants.length <= 1 ? { display: 'none' } : {}}\n        />\n\n        <label>User</label>\n        <input\n          placeholder=\"Search users...\"\n          onChange={handleChange}\n          type=\"text\"\n          name=\"name\"\n          value={formInput.name}\n        />\n        {chatParticipants.length === 0 ? (\n          ''\n        ) : (\n          <div className=\"new-conversation-modal-chat-participant-container\">\n            {chatParticipants.map((chatParticipant, i) => (\n              <Fragment key={i}>\n                <ChatParticipant\n                  chatParticipant={chatParticipant}\n                  handleRemoveUser={handleRemoveUser}\n                />\n              </Fragment>\n            ))}\n          </div>\n        )}\n        <CSSTransition\n          in={searchResults.length > 0}\n          classNames=\"test-container\"\n          unmountOnExit\n          mountOnEnter\n          timeout={300}\n        >\n          <Fragment nodeRef={nodeRef}>\n            {searchResults.length === 0 ? (\n              ''\n            ) : (\n              <div className=\"new-conversation-modal-chat-search-result-container\">\n                {searchResults.map((searchResult, i) => (\n                  <Fragment key={i}>\n                    <SearchResult\n                      chatParticipants={chatParticipants}\n                      handleAddUser={handleAddUser}\n                      searchResult={searchResult}\n                    />\n                  </Fragment>\n                ))}\n              </div>\n            )}\n          </Fragment>\n        </CSSTransition>\n        <div className=\"new-conversation-modal-buttons\">\n          <button\n            type=\"submit\"\n            className={`${\n              searchResults.length === 0 ? 'button-no-search-results' : ''\n            }`}\n          >\n            Create Chat\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default NewConversationModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}